<!DOCTYPE html>
<html>
  <head>
    <title>Color Scheme Toggle</title>
    <script type="module" src="./tri-state-toggle.element.js"></script>
    <style></style>
  </head>
  <body>
    <tri-state-toggle
    hidden
      id="color-scheme"
      primary="dark"
      secondary="light"
      tertiary="light dark"
    >
      <span slot="primary">ğŸŒ™ Dark</span>
      <span slot="secondary">â˜€ï¸ Light</span>
      <span slot="tertiary">ğŸ’» System</span>
    </tri-state-toggle>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const toggle = document.querySelector("#color-scheme");
        if (toggle) {
          const storageKey = `tri-state-toggle:${toggle.id}`;
          const storedValue = localStorage.getItem(storageKey);

          if (storedValue) {
            toggle.setAttribute("value", storedValue);
          }

          document.documentElement.style.colorScheme = toggle.value;

          toggle.addEventListener("change", (e) => {
            document.documentElement.style.colorScheme = e.detail.value;
            localStorage.setItem(storageKey, e.detail.value);
          });
        }
      });
    </script>
  </body>
</html>
